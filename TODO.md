# To do

Here's what I'm currently working on:

- make linux work without docker locally?
  + cache files between docker and not should probably not be shared?
- tests for all examples in readme
- cache packages and remove second cabal update? use >> GITHUB_ENV if needed
  + caching should affect the need for the second update, are we mounting the right thing?
- spexup 
  + confirm with user
  + remove gh dependency?
  + cache releases.json?
- don't stop on failure
- print nicer coverage stats, including unreached ops
- contributing.md
  + https://x.com/mitchellh/status/1852039089547309552
- release notes
  + focus on infra
  + bare minimum language and verifier
  + one example, for more see readme/website?
- website
  + why/motivation/comparison?
  + tutorial
  + install
  + community
  + (docs)
  + (news/blog)

### Features

- use duration rather than numTests?
- print progress while testing

- Nice errors
  + Introduce FancyError datatype and display it in LibMain?
  + https://elm-lang.org/news/compiler-errors-for-humans
  + https://hackage.haskell.org/package/diagnose-2.5.1/docs/Error-Diagnose.html
  + https://medium.com/designing-atlassian/10-design-principles-for-delightful-clis-522f363bac87
  + https://github.com/charmbracelet/bubbletea
  + https://gleam.run/

- Packaging
  + move petstore to separate repo?
  + install script?
    * update spexup itself? 
    * check what versions are locally installed already

      spexup [update] [spexup|spex] -- install latest version
    * spexup list -- lists available releases
      spexup install (spexup|spex) <version>

  + changelog generator (semantic commit messages)
  + commit hook for conventional commits?
  + public docker images for spex and spex-petshop
    * use --target?
- https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-and-highlighting-code-blocks#syntax-highlighting

### Bugs

- abstract types don't need to pass scope checking, but they fail during generation:

    ```
    component PetStore where
    
    addPet : POST /pet @Pet
    getPet : GET /pet/{petId : Int} -> Pet
    ```

    spex: genUserDefined: impossible, scope checker
    CallStack (from HasCallStack):
      error, called at src/Spex/Verifier/Generator.hs:198:20 in spex-0.0.0-inplace:Spex.Verifier.Generator

  They should be generated by reuse only...

- abstract types get generated, if there are not previous values to draw from.
  Fix by allowing generation to throw?
- unique types don't get checked
- normal types should sometimes generate/sometimes reuse

### Refactor

- remove ExceptT?
- remove use of String
- structured logs, returns json object with one error or one test result?
